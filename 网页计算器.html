<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ninteenth</title>
</head>
<link rel="stylesheet" href="网页计算器.css" type="text/css">
<body>
<script>
var Boo=false;  //判断是否按下计算符号
var result=0;  //存放数字
var mn;       //存储计算符号的变量
function get(x){
	return document.getElementById(x);
	}
function num(n){
	var t=get("input-in");
	if(Boo==true){
		t.value=n;
		Boo=false;
		}
		else{
	if(t.value==0)
	t.value=n;
	else
	t.value+=n; //t.value=t.value+n
		}
	}
function point(n){
	var t=get("input-in");                
    if(Boo==true)                                        
	t.value="0.";                       
	
	else                                //indexOf() 方法可返回某个指定的字符串值在字符串中首次出现的位置。
	if(t.value.indexOf(".")==-1){    //如果要检索的字符串值没有出现，则该方法返回 -1。
	 t.value+=".";                //看看value是不是包含‘.’字符，不包含则返回-1，包含则返回这个字符出现的位置，记得是0开始索引的
	}
	}
	
function cal(op){
	var m=get("input-in").value;
	if(m==" "){m=0;}
	Boo=true;
	switch(mn){
		case "+":
		result+=parseFloat(m);
		break;
		case "-":
		result-=parseFloat(m);
		break;
		case "*":
		result*=parseFloat(m);
		break;
		case "/":
		result/=parseFloat(m);
		break;
		case '%':
        result%=m;
		break;
        case 'x^y':
        result=Math.pow(result,m);
		break;
		case '取整':
		result=Math.round(parseFloat(m));
		break;
		default:
		result=parseFloat(m);
		}
	get("input-in").value=result;
	mn=op;
	}
function withdraw(n){
	var t=get("input-in");
	t.value=t.value.substring(0,t.value.length-1);
	if(t.value==0)
	t.value==0;
	}
function kong(){
     document.getElementById('input-in').value=' ';
		}
function math(op){
	var n=get("input-in").value;
	if(n==' ')
	alert("请按下按钮");
	Boo=true;//已经按下按钮
	with(Math){
	switch(op){
		case 'sin':result=sin(n);break;
		case 'cos':result=cos(n);break;
		case 'tan':result=tan(n);break;
		case 'sin':result=sin(n);break;
		case 'asin':result=asin(n);break;
		case 'acos':result=acos(n);break;
		case 'atan':result=atan(n);break;
		case 'PI':result=PI;break;
		case '1/x':result=1/n;break;
		case 'exp':result=exp(n);break;
		case 'lnx':result=log(n);break;
		case 'lgx':result=log(n)/log(10);break;
		case 'n!':result=jc(n);break;
		default:result=parseFloat(n);
      }
	}
	get("input-in").value=result;
}
function jc(a){
		if(a==1)
		return 1;
		else
		return jc(a-1)*a;//递归
		}
</script>
<table>
<tr>
<td colspan="2"><input type="text" id="input-in"  value="0"></td>
<td style="text-align:center; padding:5px;">
<input type="button"  value="清除" onclick="kong()" >
<input type="button"  value="退格" onClick="withdraw()"></td>
</tr>
<tr>
<td height="278">
<table id="tab1">
<tr>
<td><input type="button" value="sin" onClick="math('sin')"></td>
<td><input type="button" value="cos" onClick="math('cos')"></td>
<td><input type="button" value="tan" onClick="math('tan')"></td>
</tr>
<tr>
<td><input type="button" value="asin" onClick="math('asin')"></td>
<td><input type="button" value="acos" onClick="math('acos')"></td>
<td><input type="button" value="atan" onClick="math('atan')"></td>
</tr>
<tr>
<td><input type="button" value="PI" onClick="math('PI')"></td>
<td><input type="button" value="1/x" onClick="math('1/x')"></td>
<td><input type="button" value="exp" onClick="math('exp')"></td>
</tr>
<tr>
<td height="46">
<input type="button" value="lnx" onClick="math('lnx')"></td>
<td><input type="button" value="lgx" onClick="math('lgx')"></td>
<td><input type="button" value="n!" onClick="math('n!')"></td>
</tr>
</table>

</td>
<td>
<table id="tab2">
<tr>
<td><input type="button" value="7" onClick="num(7)"></td>
<td><input type="button" value="8" onClick="num(8)"></td>
<td><input type="button" value="9" onClick="num(9)"></td>
</tr>
<tr>
<td><input type="button" value="4" onClick="num(4)"></td>
<td><input type="button" value="5" onClick="num(5)"></td>
<td><input type="button" value="6" onClick="num(6)"></td>
</tr>
<tr>
<td><input type="button" value="1" onClick="num(1)"></td>
<td><input type="button" value="2" onClick="num(2)"></td>
<td><input type="button" value="3" onClick="num(3)"></td>
</tr>
<tr>
<td><input type="button" value="0" onClick="num(0)"></td>
<td><input type="button" value="." onClick="point()"></td>
<td><input type="button" value="=" onClick="cal()"></td>
</tr>
</table>
</td>

<td>
<table id="tab3">
<tr>
<td><input type="button" value="+" onClick="cal('+')"></td>
<td><input type="button" value="-" onClick="cal('-')"></td>

</tr>
<tr>
<td><input type="button" value="*" onClick="cal('*')"></td>
<td><input type="button" value="/" onClick="cal('/')"></td>

</tr>
<tr>
<td><input type="button" value="%" onClick="cal('%')"></td>
<td><input type="button" value="^" onClick="cal('x^y')"></td>

</tr>
<tr>
<td><input type="button" value="取整" onClick="cal('取整')"></td>
<td><input type="button" value="求余" onClick="cal('%')"></td>
</tr>
</table>
</td>
</tr>

</table>
</body>
</html>
