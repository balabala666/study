<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>twenty-first</title>
</head>
<script>
var gj=new Object();
gj.name="郭靖";
gj.hp=500;
 gj.att=240;
 gj.def=200;
 gj.sd=50;
 gj.skill=['坑龙有悔','龙在于野','飞龙在天','左右互搏'];
 
var f=new Object();
f.name="欧阳锋";
f.hp=480;
f.att=250;
f.def=220;
f.sd=50;
f.skill=['灵蛇棍法','天蟾神功','龙象波若功','逆转静脉'];

for(var i=1;i<=100;i++){
function pk(a,b){
	 /*return a.sd*Math.random()>b.sd*Math.random()?[a,b]:[b,a]*/
	   var q=a.sd*Math.random();
	   var p=a.sd*Math.random();
	   if(q>p)
	   return [a,b];//数组
	   else
	   return [b,a];
	}

var r=pk(gj,f);
var skilln=Math.floor(Math.random()*4);
var attack=r[0];
var defend=r[1];
var damage=attack.att*Math.random()-defend.def*Math.random();
if(damage<=0)damage=0;
else {damage=Math.floor(damage);}
defend.hp-=damage;

document.write(attack.name+"使用了一招"+attack.skill[skilln]+"<br>");
document.write(defend.name+"受到"+damage+"点伤害"+"<br>");
    if(defend.hp<=0)
	{
				alert(defend.name+'战败了'+'   '+attack.name+'取得了胜利！'+'\n'+attack.name+'还有血量'+attack.hp+'\n'+attack.name+'取得了胜利！'+'Game Over!');
				break;
	}
	else
document.write(defend.name+"还有HP"+defend.hp+"<br>"+attack.name+"还有HP"+attack.hp+"<br>第"+i+"回合结束"+"<hr>");
}
</script>
<body>
</body>
</html>
